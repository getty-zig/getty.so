<!DOCTYPE html>
<!-- SPDX-License-Identifier: LGPL-2.1-or-later -->

<html>

  <!-- SPDX-License-Identifier: LGPL-2.1-or-later -->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0021D8">

  <title>Blocks and Tuples</title>

  <link rel="canonical" href="https://getty.so/blocks-and-tuples/">
  <link rel="alternate" type="application/rss+xml" title="Getty" href="https://getty.so/feed.xml" />

  <link rel="stylesheet" href="/style.css">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
</head>


  <body>

    <!-- SPDX-License-Identifier: LGPL-2.1-or-later -->

<header class="site-header">
  <div class="wrapper" style="text-align: center;">
    <a class="page-logo" href="/">
      <img src="/assets/images/page-logo.svg" alt="getty">
    </a>
  </div>
</header>


    <div class="container">
      <h1 id="blocks-and-tuples">Blocks and Tuples</h1>

<p><strong>Blocks</strong> are the fundamental building blocks (no pun intended) of Getty‚Äôs
(de)serialization process.</p>

<p>They define how a type should be serialized or deserialized into. For example,
the ways a <code class="language-plaintext highlighter-rouge">bool</code> value can be serialized by Getty are specified in the
<code class="language-plaintext highlighter-rouge">getty.ser.blocks.Bool</code> block. Similarly, the ways to deserialize into a
<code class="language-plaintext highlighter-rouge">[5]i32</code> are defined in the <code class="language-plaintext highlighter-rouge">getty.de.blocks.Array</code> block.</p>

<p>Getty uses blocks internally to form its core (de)serialization behavior.
However, blocks are also the the main mechanism for customization in Getty.
Users and (de)serializers can take advantage of blocks to customize the way
Getty serializes or deserializes a value.</p>

<h2 id="blocks">Blocks</h2>

<p>Blocks are <code class="language-plaintext highlighter-rouge">struct</code> namespaces that are responsible for specifying two things:</p>

<ol>
  <li>The type(s) that should be (de)serialized by the block.</li>
  <li>How to serialize or deserialize into values of those types.</li>
</ol>

<p>The way a block is defined varies depending on whether you‚Äôre serializing or
deserializing and the kind of block you‚Äôre making. To show you what I mean,
let‚Äôs go through the different kinds of blocks.</p>

<!--How you specify these two things varies depending on whether you're serializing-->
<!--or deserializing, and the customization methods you're using. Once you have a-->
<!--block though, you can pass them to Getty via the-->
<!--[`getty.Serializer`](https://docs.getty.so/#root;Serializer) and-->
<!--[`getty.Deserializer`](https://docs.getty.so/#root;Deserializer) interfaces,-->
<!--which have parameters such as `user_sbt`, `serializer_sbt`, `user_dbt` and-->
<!--`deserializer_dbt`. Those parameter are where you'd pass in your blocks.-->

<h3 id="serialization-blocks">Serialization Blocks</h3>

<p>To manually define the serialization process, you can use a serialization block:</p>

<div class="code-block"><div class="language-tag">Zig code</div><pre class="code-block-inner">

<figure class="highlight"><pre><code class="language-zig" data-lang="zig"><span class="k">const</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="c">// üëã is specifies which types should be serialized by this block.</span>
    <span class="c">//</span>
    <span class="c">//    In this case, the block applies only to Boolean values.</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">is</span><span class="p">(</span><span class="k">comptime</span> <span class="n">T</span><span class="p">:</span> <span class="k">type</span><span class="p">)</span> <span class="k">bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">T</span> <span class="o">==</span> <span class="k">bool</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c">// üëã serialize specifies how to serialize values relevant to this block.</span>
    <span class="c">//</span>
    <span class="c">//    Here, we're telling Getty to serialize bool values as Getty Integers.</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">serialize</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">anytype</span><span class="p">,</span> <span class="n">serializer</span><span class="p">:</span> <span class="n">anytype</span><span class="p">)</span> <span class="nb">@TypeOf</span><span class="p">(</span><span class="n">serializer</span><span class="p">).</span><span class="py">Error</span><span class="o">!</span><span class="nb">@TypeOf</span><span class="p">(</span><span class="n">serializer</span><span class="p">).</span><span class="py">Ok</span> <span class="p">{</span>
        <span class="c">// Convert value to a Getty Integer (represented by any integer type).</span>
        <span class="k">const</span> <span class="n">v</span><span class="p">:</span> <span class="kt">i32</span> <span class="o">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span><span class="p">;</span>

        <span class="c">// Pass the Getty Integer value to the serializer.</span>
        <span class="k">return</span> <span class="k">try</span> <span class="n">serializer</span><span class="p">.</span><span class="nf">serializeInt</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

</pre></div>

<h3 id="deserialization-blocks">Deserialization Blocks</h3>

<p>To manually define the deserialization process, you can use a deserialization block:</p>

<div class="code-block"><div class="language-tag">Zig code</div><pre class="code-block-inner">

<figure class="highlight"><pre><code class="language-zig" data-lang="zig"><span class="k">const</span> <span class="n">db</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="c">// üëã is specifies which types can be deserialized into by this block.</span>
    <span class="c">//</span>
    <span class="c">//    In this case, the block can only deserialize into bool values.</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">is</span><span class="p">(</span><span class="k">comptime</span> <span class="n">T</span><span class="p">:</span> <span class="k">type</span><span class="p">)</span> <span class="k">bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">T</span> <span class="o">==</span> <span class="k">bool</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c">// üëã deserialize specifies what hint Getty should provide a deserializer.</span>
    <span class="c">//</span>
    <span class="c">//    In this case, we call `deserializeInt`, which means that Getty will</span>
    <span class="c">//    tell the deserializer that we can probably make whatever value we're</span>
    <span class="c">//    deserializing into from a Getty Integer. That's right! We'll be making</span>
    <span class="c">//    a bool from an integer!</span>
    <span class="c">//</span>
    <span class="c">//    ‚ùì The second parameter of deserialize is the current type being</span>
    <span class="c">//       deserialized into. Generally, you don't need it unless you're</span>
    <span class="c">//       doing pointer deserialization.</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">deserialize</span><span class="p">(</span>
        <span class="n">allocator</span><span class="p">:</span> <span class="o">?</span><span class="n">std</span><span class="p">.</span><span class="py">mem</span><span class="p">.</span><span class="py">Allocator</span><span class="p">,</span>
        <span class="k">comptime</span> <span class="mi">_</span><span class="p">:</span> <span class="k">type</span><span class="p">,</span>
        <span class="n">deserializer</span><span class="p">:</span> <span class="n">anytype</span><span class="p">,</span>
        <span class="n">visitor</span><span class="p">:</span> <span class="n">anytype</span><span class="p">,</span>
    <span class="p">)</span> <span class="nb">@TypeOf</span><span class="p">(</span><span class="n">deserializer</span><span class="p">).</span><span class="py">Error</span><span class="o">!</span><span class="nb">@TypeOf</span><span class="p">(</span><span class="n">visitor</span><span class="p">).</span><span class="py">Value</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">try</span> <span class="n">deserializer</span><span class="p">.</span><span class="nf">deserializeInt</span><span class="p">(</span><span class="n">allocator</span><span class="p">,</span> <span class="n">visitor</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c">// üëã Visitor returns a type that implements getty.de.Visitor.</span>
    <span class="c">//</span>
    <span class="c">//    Visitors are responsible for specifying how to deserialize values</span>
    <span class="c">//    from Getty's data model into Zig. Here, we've made a visitor that</span>
    <span class="c">//    can deserialize Getty Integers into bool values, which it does by</span>
    <span class="c">//    simply returning whether or not the integer is 0.</span>
    <span class="c">//</span>
    <span class="c">//    ‚ùì The Value parameter is the type that will be produced by the</span>
    <span class="c">//       visitor. In this case, Value would be bool. The parameter's mostly</span>
    <span class="c">//       useful for when you're creating visitors for generic types.</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">Visitor</span><span class="p">(</span><span class="k">comptime</span> <span class="n">Value</span><span class="p">:</span> <span class="k">type</span><span class="p">)</span> <span class="k">type</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">struct</span> <span class="p">{</span>
            <span class="k">pub</span> <span class="k">usingnamespace</span> <span class="n">getty</span><span class="p">.</span><span class="py">de</span><span class="p">.</span><span class="nf">Visitor</span><span class="p">(</span>
                <span class="nb">@This</span><span class="p">(),</span>
                <span class="n">Value</span><span class="p">,</span>
                <span class="o">.</span><span class="p">{</span> <span class="p">.</span><span class="py">visitInt</span> <span class="o">=</span> <span class="n">visitInt</span> <span class="p">},</span>
            <span class="p">);</span>

            <span class="k">pub</span> <span class="k">fn</span> <span class="n">visitInt</span><span class="p">(</span>
                <span class="mi">_</span><span class="p">:</span> <span class="nb">@This</span><span class="p">(),</span>
                <span class="n">allocator</span><span class="p">:</span> <span class="o">?</span><span class="n">std</span><span class="p">.</span><span class="py">mem</span><span class="p">.</span><span class="py">Allocator</span><span class="p">,</span>
                <span class="k">comptime</span> <span class="n">Deserializer</span><span class="p">:</span> <span class="k">type</span><span class="p">,</span>
                <span class="n">input</span><span class="p">:</span> <span class="n">anytype</span><span class="p">,</span>
            <span class="p">)</span> <span class="n">Deserializer</span><span class="p">.</span><span class="py">Error</span><span class="o">!</span><span class="n">Value</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">input</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

</pre></div>

<h3 id="attribute-blocks">Attribute Blocks</h3>

<p>For simpler modifications to Getty‚Äôs (de)serialization processes for <code class="language-plaintext highlighter-rouge">struct</code>,
<code class="language-plaintext highlighter-rouge">enum</code>, or <code class="language-plaintext highlighter-rouge">union</code> types, you can use attribute blocks.</p>

<p>With attribute blocks, the default (de)serialization processes are used. For
example, <code class="language-plaintext highlighter-rouge">struct</code>s will be serialized using the default
<code class="language-plaintext highlighter-rouge">getty.ser.blocks.Struct</code> block and deserialized using the default
<code class="language-plaintext highlighter-rouge">getty.de.blocks.Struct</code> block. However, slight changes to these processes will
take effect based on which attributes you specify. For a complete list of the
attributes in Getty, see <a href="/attributes">here</a>.</p>

<p>Attribute blocks are defined the same whether you‚Äôre serializing or
deserializing:</p>

<div class="code-block"><div class="language-tag">Zig code</div><pre class="code-block-inner">

<figure class="highlight"><pre><code class="language-zig" data-lang="zig"><span class="k">const</span> <span class="n">Point</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="kt">i32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="kt">i32</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">const</span> <span class="n">ab</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">is</span><span class="p">(</span><span class="k">comptime</span> <span class="n">T</span><span class="p">:</span> <span class="k">type</span><span class="p">)</span> <span class="k">bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">T</span> <span class="o">==</span> <span class="n">Point</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c">// üëã attributes specifies (de)serialization properties for values relevant</span>
    <span class="c">//    to this block.</span>
    <span class="c">//</span>
    <span class="c">//    If this block is used for serialization, then we've specified that</span>
    <span class="c">//    the "x" field of Point should be serialized as "X", and that the "y"</span>
    <span class="c">//    field should be skipped.</span>
    <span class="c">//</span>
    <span class="c">//    If this block is used for deserialization, then we've specified that</span>
    <span class="c">//    the value for the "x" field of Point is serialized as "X", and that</span>
    <span class="c">//    we should not try to deserialize the "y" field.</span>
    <span class="c">//</span>
    <span class="c">//    ‚ùì attributes is an anonymous struct literal. Every field name in</span>
    <span class="c">//       attributes must match either the fields or variants in your</span>
    <span class="c">//       struct, enum, or union, or the word "Container". The former kind</span>
    <span class="c">//       of attributes are known as field/variant attributes, while the</span>
    <span class="c">//       latter are known as container attributes.</span>
    <span class="c">//</span>
    <span class="c">//    ‚ùì Each field in attributes is also an anonymous struct literal. The</span>
    <span class="c">//       fields in these inner structs depend on the kind of attribute</span>
    <span class="c">//       you're specifying.</span>
    <span class="k">pub</span> <span class="k">const</span> <span class="n">attributes</span> <span class="o">=</span> <span class="o">.</span><span class="p">{</span>
        <span class="p">.</span><span class="py">x</span> <span class="o">=</span> <span class="o">.</span><span class="p">{</span> <span class="p">.</span><span class="py">rename</span> <span class="o">=</span> <span class="s">"X"</span> <span class="p">},</span>
        <span class="p">.</span><span class="py">y</span> <span class="o">=</span> <span class="o">.</span><span class="p">{</span> <span class="p">.</span><span class="py">skip</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="p">};</span>
<span class="p">};</span></code></pre></figure>

</pre></div>

<h3 id="usage">Usage</h3>

<p>Once you‚Äôve defined a block, you can pass them along to Getty via the
<a href="https://docs.getty.so/#root;Serializer"><code class="language-plaintext highlighter-rouge">getty.Serializer</code></a> and
<a href="https://docs.getty.so/#root;Deserializer"><code class="language-plaintext highlighter-rouge">getty.Deserializer</code></a> interfaces.
They take optional (de)serialization blocks as arguments:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">user_sbt</code>, <code class="language-plaintext highlighter-rouge">user_dbt</code>: User-defined (de)serialization blocks.</li>
  <li><code class="language-plaintext highlighter-rouge">serializer_sbt</code>, <code class="language-plaintext highlighter-rouge">deserializer_dbt</code>: (De)serializer-defined (de)serialization blocks.</li>
</ul>

<p>For example, the following defines a serializer that can serialize Getty
Booleans and Integers into JSON. It is generic over a serialization block,
which it passes along to Getty, allowing us to easily customize Getty‚Äôs
serialization behavior.</p>

<div class="code-block"><div class="language-tag">Zig code</div><pre class="code-block-inner">

<figure class="highlight"><pre><code class="language-zig" data-lang="zig"><span class="k">const</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">@import</span><span class="p">(</span><span class="s">"std"</span><span class="p">);</span>
<span class="k">const</span> <span class="n">getty</span> <span class="o">=</span> <span class="nb">@import</span><span class="p">(</span><span class="s">"getty"</span><span class="p">);</span>

<span class="k">fn</span> <span class="n">Serializer</span><span class="p">(</span><span class="k">comptime</span> <span class="n">user_sb</span><span class="p">:</span> <span class="o">?</span><span class="k">type</span><span class="p">)</span> <span class="k">type</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">struct</span> <span class="p">{</span>
        <span class="k">pub</span> <span class="k">usingnamespace</span> <span class="n">getty</span><span class="p">.</span><span class="nf">Serializer</span><span class="p">(</span>
            <span class="nb">@This</span><span class="p">(),</span>
            <span class="n">Ok</span><span class="p">,</span>
            <span class="n">Error</span><span class="p">,</span>
            <span class="n">user_sb</span> <span class="k">orelse</span> <span class="kc">null</span><span class="p">,</span>
            <span class="kc">null</span><span class="p">,</span>
            <span class="kc">null</span><span class="p">,</span>
            <span class="kc">null</span><span class="p">,</span>
            <span class="kc">null</span><span class="p">,</span>
            <span class="o">.</span><span class="p">{</span>
                <span class="p">.</span><span class="py">serializeBool</span> <span class="o">=</span> <span class="n">serializeBool</span><span class="p">,</span>
                <span class="p">.</span><span class="py">serializeInt</span> <span class="o">=</span> <span class="n">serializeInt</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">);</span>

        <span class="k">const</span> <span class="n">Ok</span> <span class="o">=</span> <span class="k">void</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">Error</span> <span class="o">=</span> <span class="k">error</span><span class="p">{};</span>

        <span class="k">fn</span> <span class="n">serializeBool</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="nb">@This</span><span class="p">(),</span> <span class="n">value</span><span class="p">:</span> <span class="k">bool</span><span class="p">)</span> <span class="n">Error</span><span class="o">!</span><span class="n">Ok</span> <span class="p">{</span>
            <span class="n">std</span><span class="p">.</span><span class="py">debug</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"{}</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">.</span><span class="p">{</span><span class="n">value</span><span class="p">});</span>
        <span class="p">}</span>

        <span class="k">fn</span> <span class="n">serializeInt</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="nb">@This</span><span class="p">(),</span> <span class="n">value</span><span class="p">:</span> <span class="n">anytype</span><span class="p">)</span> <span class="n">Error</span><span class="o">!</span><span class="n">Ok</span> <span class="p">{</span>
            <span class="n">std</span><span class="p">.</span><span class="py">debug</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"{}</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">.</span><span class="p">{</span><span class="n">value</span><span class="p">});</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="k">const</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">is</span><span class="p">(</span><span class="k">comptime</span> <span class="n">T</span><span class="p">:</span> <span class="k">type</span><span class="p">)</span> <span class="k">bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">T</span> <span class="o">==</span> <span class="k">bool</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="n">serialize</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">anytype</span><span class="p">,</span> <span class="n">serializer</span><span class="p">:</span> <span class="n">anytype</span><span class="p">)</span> <span class="o">!</span><span class="nb">@TypeOf</span><span class="p">(</span><span class="n">serializer</span><span class="p">).</span><span class="py">Ok</span> <span class="p">{</span>
        <span class="k">const</span> <span class="n">v</span><span class="p">:</span> <span class="kt">i32</span> <span class="o">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">try</span> <span class="n">serializer</span><span class="p">.</span><span class="nf">serializeInt</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">pub</span> <span class="k">fn</span> <span class="n">main</span><span class="p">()</span> <span class="k">anyerror</span><span class="o">!</span><span class="k">void</span> <span class="p">{</span>
    <span class="c">// Normal</span>
    <span class="p">{</span>
        <span class="k">var</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Serializer</span><span class="p">(</span><span class="kc">null</span><span class="p">){};</span>
        <span class="k">const</span> <span class="n">serializer</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">serializer</span><span class="p">();</span>

        <span class="k">try</span> <span class="n">getty</span><span class="p">.</span><span class="nf">serialize</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="n">serializer</span><span class="p">);</span>  <span class="c">// output: true</span>
        <span class="k">try</span> <span class="n">getty</span><span class="p">.</span><span class="nf">serialize</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="n">serializer</span><span class="p">);</span> <span class="c">// output: false</span>
    <span class="p">}</span>

    <span class="c">// Custom</span>
    <span class="p">{</span>
        <span class="k">var</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Serializer</span><span class="p">(</span><span class="n">sb</span><span class="p">){};</span>
        <span class="k">const</span> <span class="n">serializer</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">serializer</span><span class="p">();</span>

        <span class="k">try</span> <span class="n">getty</span><span class="p">.</span><span class="nf">serialize</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="n">serializer</span><span class="p">);</span>  <span class="c">// output: 1</span>
        <span class="k">try</span> <span class="n">getty</span><span class="p">.</span><span class="nf">serialize</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="n">serializer</span><span class="p">);</span> <span class="c">// output: 0</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

</pre></div>

<h2 id="tuples">Tuples</h2>

<p>Occassionally, you may want to pass multiple (de)serialization blocks to Getty. To do so, you can use <strong>(de)serialization tuples</strong>.</p>

<p>A (de)serialization tuple is, well, a tuple of (de)serialization blocks. They
can be used wherever a (de)serialization block can be used and allow you to do
some pretty handy things. For example, suppose you had the following type:</p>

<div class="code-block"><div class="language-tag">Zig code</div><pre class="code-block-inner">

<figure class="highlight"><pre><code class="language-zig" data-lang="zig"><span class="k">const</span> <span class="n">Point</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="kt">i32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="kt">i32</span><span class="p">,</span>
<span class="p">};</span></code></pre></figure>

</pre></div>

<p>If you just wanted to serialize <code class="language-plaintext highlighter-rouge">Point</code> values as sequences, you‚Äôd simply write
a serialization block doing so and pass it along to Getty. However, what if you
also wanted to serialize <code class="language-plaintext highlighter-rouge">i32</code> values as Booleans?</p>

<p>One option is to stuff all of your custom serialization logic into a single
block. But that gets messy real quick and inevitably becomes a pain in the butt
to maintain.</p>

<p>A much better solution is to break up your custom serialization behaviors into
their own separate blocks. One for <code class="language-plaintext highlighter-rouge">Point</code> values and one for <code class="language-plaintext highlighter-rouge">i32</code> values.
Then, you can just group them together as a serialization tuple and have Getty
process both blocks!</p>

<div class="code-block"><div class="language-tag">Zig code</div><pre class="code-block-inner">

<figure class="highlight"><pre><code class="language-zig" data-lang="zig"><span class="k">const</span> <span class="n">point_sb</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="c">// ...</span>
<span class="p">};</span>

<span class="k">const</span> <span class="n">i32_sb</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="c">// ...</span>
<span class="p">};</span>

<span class="k">const</span> <span class="n">point_st</span> <span class="o">=</span> <span class="o">.</span><span class="p">{</span> <span class="n">point_sb</span><span class="p">,</span> <span class="n">i32_sb</span> <span class="p">};</span></code></pre></figure>

</pre></div>

    </div>

    <!-- SPDX-License-Identifier: LGPL-2.1-or-later -->

<footer class="site-footer">
  <p>&copy; 2022 Getty</p>
</footer>


  </body>

</html>
