<!DOCTYPE html>
<!-- SPDX-License-Identifier: LGPL-2.1-or-later -->

<html>

  <!-- SPDX-License-Identifier: LGPL-2.1-or-later -->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0021D8">

  <title>Introduction</title>

  <link rel="canonical" href="https://getty.so/guide/introduction/">
  <link rel="alternate" type="application/rss+xml" title="Getty" href="https://getty.so/feed.xml" />

  <link rel="stylesheet" href="/style.css">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
</head>


  <body>

    <!-- SPDX-License-Identifier: LGPL-2.1-or-later -->

<header class="site-header">
  <div class="wrapper" style="text-align: center;">
    <a class="page-logo" href="/">
      <img src="/assets/images/page-logo.svg" alt="getty">
    </a>
  </div>
</header>


    <div class="container">
      <h1 id="introduction">Introduction</h1>

<p>Getty is a framework for building serializers and deserializers in Zig.</p>

<p>As an example, the following code shows a JSON serializer that supports scalar and string values. At around 50 lines of code, <code class="language-plaintext highlighter-rouge">Serializer</code> is a fully functional serializer capable of converting values of type <code class="language-plaintext highlighter-rouge">bool</code>, <code class="language-plaintext highlighter-rouge">i32</code>, <code class="language-plaintext highlighter-rouge">f64</code>, <code class="language-plaintext highlighter-rouge">enum{ foo }</code>, <code class="language-plaintext highlighter-rouge">[]u8</code>, <code class="language-plaintext highlighter-rouge">*const [5]u8</code>, <code class="language-plaintext highlighter-rouge">?void</code>, and more into JSON!</p>

<div class="code-block"><div class="language-tag">Zig code</div><pre class="code-block-inner">

<figure class="highlight"><pre><code class="language-zig" data-lang="zig"><span class="k">const</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">@import</span><span class="p">(</span><span class="s">"std"</span><span class="p">);</span>
<span class="k">const</span> <span class="n">getty</span> <span class="o">=</span> <span class="nb">@import</span><span class="p">(</span><span class="s">"getty"</span><span class="p">);</span>

<span class="k">const</span> <span class="n">Serializer</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">usingnamespace</span> <span class="n">getty</span><span class="p">.</span><span class="nf">Serializer</span><span class="p">(</span>
        <span class="nb">@This</span><span class="p">(),</span>
        <span class="n">Ok</span><span class="p">,</span>
        <span class="n">Error</span><span class="p">,</span>
        <span class="kc">null</span><span class="p">,</span>
        <span class="kc">null</span><span class="p">,</span>
        <span class="kc">null</span><span class="p">,</span>
        <span class="kc">null</span><span class="p">,</span>
        <span class="kc">null</span><span class="p">,</span>
        <span class="o">.</span><span class="p">{</span>
            <span class="p">.</span><span class="py">serializeBool</span> <span class="o">=</span> <span class="n">serializeBool</span><span class="p">,</span>
            <span class="p">.</span><span class="py">serializeEnum</span> <span class="o">=</span> <span class="n">serializeEnum</span><span class="p">,</span>
            <span class="p">.</span><span class="py">serializeFloat</span> <span class="o">=</span> <span class="n">serializeNumber</span><span class="p">,</span>
            <span class="p">.</span><span class="py">serializeInt</span> <span class="o">=</span> <span class="n">serializeNumber</span><span class="p">,</span>
            <span class="p">.</span><span class="py">serializeNull</span> <span class="o">=</span> <span class="n">serializeNull</span><span class="p">,</span>
            <span class="p">.</span><span class="py">serializeSome</span> <span class="o">=</span> <span class="n">serializeSome</span><span class="p">,</span>
            <span class="p">.</span><span class="py">serializeString</span> <span class="o">=</span> <span class="n">serializeString</span><span class="p">,</span>
            <span class="p">.</span><span class="py">serializeVoid</span> <span class="o">=</span> <span class="n">serializeNull</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">);</span>

    <span class="k">const</span> <span class="n">Ok</span> <span class="o">=</span> <span class="k">void</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">Error</span> <span class="o">=</span> <span class="k">error</span><span class="p">{};</span>

    <span class="k">fn</span> <span class="n">serializeBool</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="nb">@This</span><span class="p">(),</span> <span class="n">value</span><span class="p">:</span> <span class="k">bool</span><span class="p">)</span> <span class="n">Error</span><span class="o">!</span><span class="n">Ok</span> <span class="p">{</span>
        <span class="n">std</span><span class="p">.</span><span class="py">debug</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"{}</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">.</span><span class="p">{</span><span class="n">value</span><span class="p">});</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="n">serializeEnum</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">@This</span><span class="p">(),</span> <span class="n">value</span><span class="p">:</span> <span class="n">anytype</span><span class="p">)</span> <span class="n">Error</span><span class="o">!</span><span class="n">Ok</span> <span class="p">{</span>
        <span class="k">try</span> <span class="n">s</span><span class="p">.</span><span class="nf">serializeString</span><span class="p">(</span><span class="nb">@tagName</span><span class="p">(</span><span class="n">value</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="n">serializeNull</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="nb">@This</span><span class="p">())</span> <span class="n">Error</span><span class="o">!</span><span class="n">Ok</span> <span class="p">{</span>
        <span class="n">std</span><span class="p">.</span><span class="py">debug</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"null</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">.</span><span class="p">{});</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="n">serializeNumber</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="nb">@This</span><span class="p">(),</span> <span class="n">value</span><span class="p">:</span> <span class="n">anytype</span><span class="p">)</span> <span class="n">Error</span><span class="o">!</span><span class="n">Ok</span> <span class="p">{</span>
        <span class="n">std</span><span class="p">.</span><span class="py">debug</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"{}</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">.</span><span class="p">{</span><span class="n">value</span><span class="p">});</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="n">serializeSome</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">@This</span><span class="p">(),</span> <span class="n">value</span><span class="p">:</span> <span class="n">anytype</span><span class="p">)</span> <span class="n">Error</span><span class="o">!</span><span class="n">Ok</span> <span class="p">{</span>
        <span class="k">try</span> <span class="n">getty</span><span class="p">.</span><span class="nf">serialize</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="nf">serializer</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">fn</span> <span class="n">serializeString</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="nb">@This</span><span class="p">(),</span> <span class="n">value</span><span class="p">:</span> <span class="n">anytype</span><span class="p">)</span> <span class="n">Error</span><span class="o">!</span><span class="n">Ok</span> <span class="p">{</span>
        <span class="n">std</span><span class="p">.</span><span class="py">debug</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"</span><span class="se">\"</span><span class="s">{s}</span><span class="se">\"\n</span><span class="s">"</span><span class="p">,</span> <span class="o">.</span><span class="p">{</span><span class="n">value</span><span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">pub</span> <span class="k">fn</span> <span class="n">main</span><span class="p">()</span> <span class="o">!</span><span class="k">void</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="n">Serializer</span><span class="p">{}).</span><span class="nf">serializer</span><span class="p">();</span>

    <span class="k">try</span> <span class="n">getty</span><span class="p">.</span><span class="nf">serialize</span><span class="p">(</span><span class="s">"Getty!"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

</pre></div>

<div class="code-block"><div class="language-tag">Shell session</div><pre class="code-block-inner">

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span>zig build run
<span class="s2">"Getty!"</span></code></pre></figure>

</pre></div>

<p>In this guide, we’ll slowly build up to the above <code class="language-plaintext highlighter-rouge">Serializer</code> implementation so that by the end of it, you’ll understand all there is to know about Getty serializers. Additionally, we’ll extend <code class="language-plaintext highlighter-rouge">Serializer</code> to support more complex types such as <code class="language-plaintext highlighter-rouge">struct{ x: i32 }</code> and <code class="language-plaintext highlighter-rouge">std.ArrayList(i32)</code>. We’ll also make a JSON deserializer afterwards and go over how custom (de)serialization works in Getty.</p>

<p>So, without further ado, let’s get started!</p>

    </div>

    <!-- SPDX-License-Identifier: LGPL-2.1-or-later -->

<footer class="site-footer">
  <p>&copy; 2022 Getty</p>
</footer>


  </body>

</html>
